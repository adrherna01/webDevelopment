<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
	<header>
		<%- include("partials/header.ejs"); %>
	</header>

	<main class="feed">
		<button type="button" class="btn btn-primary gradient-background" id="getPostButton"><img class="add-logo" height="20px" src="/images/plus-square-fill.svg">  Make a post</button>
		<div class="container-post">
			<h2>Currents Posts: </h2>
			<ul>
				<% blogPost.forEach((post) => {%>
					<li class="list-element">
						<a id="post<%= post.id %>" href="/post/<%= post.id %>"><%= post.title %></a>
					</li>
				<% });%>
			</ul>
		</div>
	</main>

	<footer>
		<%- include("partials/footer.ejs"); %>
	</footer>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

	<script>
		document.getElementById('getPostButton').addEventListener('click', function() {
			console.log("im here");
			fetch('/makePost', {
				method: 'GET',
				headers: {
				'Content-Type': 'application/json',
			  },
			})
			.then(response => {
				if (!response.ok) {
					throw new Error('Network response was not ok');
				}
			window.location.href = '/makePost';
			})
			.catch(error => {
				console.error('There was a problem with the fetch operation:', error);
			});
		});
	 </script>
</body>
</html>
